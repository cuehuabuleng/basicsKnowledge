<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <button id="loginBtn">登录</button>
    <script>
        // function Store(){
        //     this.actions = function(){
        //         console.log('vue store')
        //     }
        // }

        // Store.getInstance = (
        //     function(){
        //         let instance;
        //         return function (){
        //             if(!instance){
        //                 instance = new Store()
        //             }
        //             return instance;
        //         }
        //     }
        // )()
        // var obj1 = Store.getInstance();
        // var obj2 = Store.getInstance();
        // console.log(obj1 == obj2)
        // console.log(obj1, obj2)


        // 单例模式--应用场景
        // 全局弹框
        // class LoginForm{
        //     // 通过new方式构造一个对象时调用
        //     constructor(){  //构造器，构造一个对象 new
        //         this.state = 'hide'  //状态值
        //     }

        //     // 显示
        //     show(){
        //         if(this.state === 'show'){
        //             console.log('已经显示')
        //             return
        //         }
        //         this.state = 'show'
        //         console.log('登陆框显示')
        //     }

        //     hide(){
        //         if(this.state === 'hide'){
        //             console.log('已经隐藏')
        //             return
        //         }
        //         console.log('隐藏')
        //         this.state = 'hide'
        //     }
        // }

        // // 利用静态方法和闭包的执行方法来创建一个单例
        // LoginForm.getInstance = (function(){
        //         let instance;
        //         return function(){
        //             if(!instance){
        //                 instance = new LoginForm();
        //             }
        //             return instance;
        //         }
        //     }
        // )()

        // login1 = LoginForm.getInstance();
        // login2 = LoginForm.getInstance()

        // login1.show()  //登陆框显示
        // login2.show()  //已经显示
        // login1.hide()  //隐藏


        // var getSingle = function (fn) {
        //     var result;

        //     return function () {
        //         console.log('result', result)
        //         return result || (result = fn.apply(this, arguments));
        //     }
        // };

        // var createLoginLayer = function () {
        //     var div = document.createElement('div');
        //     div.innerHTML = '我是登录浮窗';
        //     div.style.display = 'none';
        //     document.body.appendChild(div);
        //     return div;
        // };

        // var createSingleLoginLayer = getSingle(createLoginLayer);
        // document.getElementById('loginBtn').onclick = function () {
        //     var loginLayer = createSingleLoginLayer();
        //     loginLayer.style.display = 'block';

        // };

        // //下面我们再试试创建唯一的iframe 用于动态加载第三方页面：
        // var createSingleIframe = getSingle(function () {
        //     var iframe = document.createElement('iframe');
        //     document.body.appendChild(iframe);
        //     return iframe;
        // });
        // document.getElementById('loginBtn').onclick = function () {
        //     var loginLayer = createSingleIframe();
        //     loginLayer.src = 'http://baidu.com';
        // };


        // // 全局变量实现单例
        // var instance = null;
        // var getInstance = function (arg) {
        //     if (!instance) {
        //         instance = arg
        //     }
        //     return instance;
        // }
        // var a = getInstance('a')
        // var b = getInstance('b')
        // console.log(a === b) //true



        // 利用闭包来实现单例

        // var Singleton = function (name) {
        //     this.name = name
        // }

        // Singleton.getInstance = (function (){
        //     var instance;
        //     return function(name){
        //         if(!instance){
        //         instance = new Singleton(name)
        //     }
        //     return instance;
        //     }
        // })()
        // var a = Singleton('a')
        // var b = Singleton('b')
        // console.log(a === b) //true


        // 普通函数实现的单例
        // function Singleton(name) {
        //     this.name = name
        //     this.instance = null
        // }

        // Singleton.getInstance = function (name) {
        //     if (!this.instance) {
        //         this.instance = new Singleton(name)
        //     }
        //     return this.instance
        // }
        // var a = Singleton.getInstance('a')
        // var b = Singleton.getInstance('b')
        // console.log(a === b)

        // 通用单列模式
        // var People = function (name) {
        //     this.name = name;
        // }

        // var Singleton = function (obj) {
        //     var instance;
        //     return function () {
        //         if (!instance) {
        //             instance = new obj(arguments)
        //         }
        //         return instance;
        //     }
        // }
        // var peopleSingle = Singleton(People)
        // var a = new peopleSingle('a')
        // var b = new peopleSingle('b')
        // console.log(a === b) //true


        // es6单例设计
        class People{
            constructor(name){
                if(typeof People.instance === 'object'){
                    return People.instance;
                }
                People.instance = this;
                this.name;
                return this;
            }
        }

        
        var a = new People('a')
        var b = new People('b')
        console.log(a, b)
        console.log(a === b) //true
    </script>
</body>

</html>